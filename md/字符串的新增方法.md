# 字符串的新增方法

## 1.String.fromCodePoint()

### String.fromCharCode()方法

- 用于从 Unicode 码点返回对应字符
- 不能识别大于**0xFFFF**的码点
- 大于**0xFFFF**会发生溢出，最高位会被舍弃

### String.fromCodePoint()方法

- 可以识别大于**0xFFFF**的字符
- 有多个参数时会被合并成一个字符串返回
- 此方法是定义在**String对象**上

## 2.String.raw()

### 返回一个斜杠被转义后的字符串

- 即斜杠前面再加一个斜杠
- 常用于模板字符串的处理
- 如果原字符串的斜杠已经转义，则会再次进行转义

### 本质

- 一个正常的函数

	- 专用于模板字符串的标签
	- 第一个参数，是一个具有`raw`属性的对象，且raw属性的值是一个数组，对应模板字符串解析后的值
    ```
    // `foo${1 + 2}bar`
    // 等同于
    String.raw({ raw: ['foo', 'bar'] }, 1 + 2) 
    //"foo3bar"
	```
    
## 3.实例方法：codePointAt()

### JavaScript 内部

- 字符以 UTF-16 的格式储存，每个字符固定为2个字节。
- 对于那些需要4个字节储存的字符（Unicode 码点大于**0xFFFF**的字符），则会认为它们是两个字符
- `charAt()`方法无法读取4个字节储存的字符
- `charCodeAt()`方法只能分别返回前两个字节和后两个字节的值

### codePointAt()方法

- 能够正确处理 4 个字节储存的字符，返回一个字符的码点
- 参数是字符在字符串中的位置`（从 0 开始）`
- 对于2个字节储存的常规字符，它的返回结果与`charCodeAt()`方法相同
- 返回的是码点的十进制值，如果想要十六进制的值，可以使用`toString()`方法转换
- 传入位置参数序号不对应问题

	- 使用`for...of`循环
	- 使用扩展运算符`（...）`进行展开运算

- 方法常用于测试一个字符由两个字节还是由四个字节组成的

## 4.实例方法：normalize()

### Unicode 正规化

- 许多欧洲语言有语调符号和重音符号，Unicode 提供了两种方法

	- 一种是直接提供带重音符号的字符，比如Ǒ（\u01D1）
	- 另一种是提供合成符号，原字符与重音符号的合成，两个字符合成一个字符

- 字符串实例的`normalize()`方法

	- 将字符的不同表示方法统一为同样的形式

### 接受一个参数来指定normalize的方式

- `NFC`，默认参数，表示“标准等价合成”，返回多个简单字符的合成字符
- `NFD`，表示“标准等价分解”，即在标准等价的前提下，返回合成字符分解的多个简单字符
- `NFKC`，表示“兼容等价合成”，返回合成字符
- `NFKD`，表示“兼容等价分解”，即在兼容等价的前提下，返回合成字符分解的多个简单字符

### 不能识别三个或三个以上字符的合成

- 只能使用正则表达式，通过 Unicode 编号区间判断

## 5.实例方法：includes(), startsWith(), endsWith()

### 传统JavaScript 

- `indexOf()`方法，可以用来确定一个字符串是否包含在另一个字符串中

### ES6 三种新方法

- `includes()`：返回布尔值，表示是否找到了参数字符串
- `startsWith()`：返回布尔值，表示参数字符串是否在原字符串的头部
- `endsWith()`：返回布尔值，表示参数字符串是否在原字符串的尾部
- 三个方法都支持第二个参数，表示开始搜索的位置

	- **endsWith**的行为针对前n个字符
	- 其他两个方法针对从第n个位置直到字符串结束

## 6.实例方法：repeat()

### repeat方法

- 返回一个新字符串，表示将原字符串重复n次
- 参数

	- `小数`，结果会向下取整
	- `负数或者Infinity`，会报错
	- `0 到-1 之间的小数`，则等同于 0
	- `0 到-1 之间的小数`，取整以后等于-0，视同为 0

## 7.实例方法：padStart()，padEnd()

### 字符串补全长度的功能

- `padStart()`用于头部补全

	- 可为数值补全指定位数
	- 可用于提示字符串格式

- `padEnd()`用于尾部补全
- 均接受两个参数

	- 第一个参数是字符串补全生效的最大长度
	- 第二个参数是用来补全的字符串
	- 原字符串的长度等于或大于最大长度，则字符串补全不生效，返回原字符串
	- 补全的字符串与原字符串的长度之和超过了最大长度，会截去超出位数的补全字符串
	- 省略第二个参数，默认使用空格补全长度

## 8.实例方法：trimStart()，trimEnd()

### 行为与trim()一致

- `trimStart()`消除字符串头部的空格
- `trimEnd()`消除尾部的空格
- 返回的都是新字符串，不会修改原始字符串

## 9.实例方法：matchAll()

- 返回一个正则表达式在当前字符串的所有匹配

## 10.实例方法：replaceAll()

### 实例方法replace()

- 只能替换第一个匹配
- 要替换所有的匹配，需使用正则表达式的`g`修饰符

### replaceAll()方法

- 返回一个新字符串，不会改变原字符串
- **String.prototype.replaceAll(searchValue, replacement)**

	- `searchValue`是搜索模式，可以是一个字符串，也可以是一个全局的正则表达式（带有g修饰符）
	- 如果`searchValue`是一个不带有g修饰符的正则表达式，replaceAll()会报错
	- `replacement`是一个字符串，表示替换的文本

		- **$&**：匹配的子字符串
		- **$`**：匹配结果前面的文本
		- **$'**：匹配结果后面的文本
		- **$n**：匹配成功的第n组内容，n是从1开始的自然数，第一个参数必须是正则表达式才生效
		- **$$**：指代美元符号$

	- `replacement`除了为字符串，也可以是一个函数

		- 函数的返回值会替换掉所有的匹配

			- 接受多个参数

				- 第一个参数是捕捉到的匹配内容
				- 第二个参数捕捉到是组匹配（有多少个组匹配，就有多少个对应的参数）
				- 倒数第二个参数是捕捉到的内容在整个字符串中的位置
				- 最后一个参数是原字符串


# 思维导图

![]()

> 参考来源：[阮一峰《ES6 教程》字符串的新增方法](https://wangdoc.com/es6/string-methods.html)

> 希望能帮助到您，如果您觉得不错就点个赞呗。本文可参与修正和完善([思维导图源文件地址](https://github.com/IsolateActors/ES6-Summary/tree/main/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE))可留言给我。如有侵权请联系删除！